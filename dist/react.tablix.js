!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["prop-types","react"],r):"object"==typeof exports?exports.ReactTablix=r(require("prop-types"),require("react")):e.ReactTablix=r(e["prop-types"],e.react)}(window,function(e,r){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=4)}([function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var n,t,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(r=r||o.length,e)for(n=0;n<e;n++)a[n]=o[0|Math.random()*r];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(t=0|16*Math.random(),a[n]=o[19==n?3&t|8:t]);return a.join("")}},function(r,n){r.exports=e},function(e,n){e.exports=r},function(e,r,n){"use strict";var t=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),a=l(n(2)),u=l(n(1)),c=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)}var f={AVG:"avg",SUM:"sum",MAX:"max",MIN:"min",FIRST:"first",LAST:"last",COUNT:"count"},s=function(e){function r(){return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}(r,a.default.Component),o(r,[{key:"getHeaderHierarchy",value:function(){var e=this.props,r=e.columns,n=e.data,o=function(e){var r=[],o=e.by,u=e.columns,c=e.sort,l=function(e,r){var n={};for(var t in e)r.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}(e,["by","columns","sort"]),i=n;return"function"==typeof c&&(i=i.sort(c)),i.forEach(function(e){var n=e[o];r.includes(n)||r.push(n)}),u?r.map(function(e){return t({name:e,by:o,columns:a(u)},l)}):r.map(function(e){return t({name:e,by:o},l)})},a=function e(r){for(var n=[],a=0;a<r.length;a++){var u=r[a];u.group?n=n.concat(o(u.group)):u.columns?n.push(t({},u,{columns:e(u.columns)})):n.push(u)}return n},u=[];r.forEach(function(e,r){e.group||0!=(e.columns||[]).length?e.group?u=u.concat(o(e.group)):e.columns&&u.push(t({},e,{columns:a(e.columns)})):u.push(e)});return function e(r){for(var n=r.filter(function(e){return!e.columns}).length,t=0;t<r.length;t++){var o=r[t];o.columns&&(o.colSpan=e(o.columns),n+=o.columns.length)}return n}(u),u}},{key:"getColumns",value:function(){for(var e=function e(r,o){for(var a=0;a<r.length;a++){var u=r[a];if(u.columns){var c=[].concat(i(o));(u.field||u.by)&&(c=o.concat({field:u.by?u.by:u.field,name:u.name})),e(u.columns,c)}else n.push(t({},u,{where:u.by?o.concat([{field:u.by,name:u.name}]):o}))}},r=this.getHeaderHierarchy(),n=[],o=0;o<r.length;o++){var a=r[o];if(a.columns){var u=[];(a.field||a.by)&&(u=[{field:a.by?a.by:a.field,name:a.name}]),e(a.columns,u)}else n.push(t({},a,{where:a.by?[{field:a.by,name:a.name}]:[]}))}return n}},{key:"getRowHierarchy",value:function(){var e=this.props,r=e.rowGroup,n=e.data;if(!r)return null;var t=function e(r,t){var o=r.by,a=r.group,u=r.sort,c=n;t.forEach(function(e){c=c.filter(function(r){return r[e.field]==e.name})}),"function"==typeof u&&(c=c.sort(u));var l=[];return c.forEach(function(e){l.includes(e[o])||l.push(e[o])}),l.map(function(r){var n={by:o,name:r,where:t.concat([{field:o,name:r}])};return a&&(n.members=e(a,t.concat([{field:o,name:r}]))),n})}(r,[]);return function e(r){for(var n=0,t=0;t<r.length;t++){var o=r[t];o.members&&(o.rowSpan=e(o.members),n+=o.members.length)}return 0==n?r.length:n}(t),t}},{key:"getRows",value:function(){for(var e=[],r=function r(n,o,a){for(var u=0;u<n.length;u++){var c=n[u];if(c.members){var l=(f={},s=a+1,p=c.rowSpan||1,s in f?Object.defineProperty(f,s,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[s]=p,f);0==u&&(l=t({},o,l)),r(c.members,l,a+1)}else{var i=t({},c);0==u&&(i.rowSpan=o),e.push(i)}}var f,s,p},n=this.getRowHierarchy(),o=0;o<n.length;o++){var a=n[o];if(a.members){var u={};0==o&&(u={0:a.rowSpan}),r(a.members,u,0)}else e.push(a)}return e}},{key:"renderHeader",value:function(){var e={};!function r(n,t){for(var o=[],u=0;u<n.length;u++){var l=n[u];if(0!==l.rowSpan){var i={key:""+(0,c.default)(8,16)};l.rowSpan>0&&(i.rowSpan=l.rowSpan),l.colSpan>0&&(i.colSpan=l.colSpan),o.push(a.default.createElement("th",i,n[u].name))}l.columns&&r(l.columns,t+1)}e.hasOwnProperty(t)||(e[t]=[]),e[t]=e[t].concat(o)}(this.getHeaderHierarchy(),0);var r=[];for(var n in e)r.push(a.default.createElement("tr",{key:n},e[n]));return a.default.createElement("thead",null,r)}},{key:"renderBody",value:function(){var e=this.props,r=e.rowGroup,n=e.data;if(!r.by)return null;var t=[],o=1;!function e(r){r.group&&(o++,e(r.group))}(r);var u=this.getRows(),l=this.getColumns();return u.forEach(function(e,r){var u=[],i=n;(e.where||[]).forEach(function(e){i=i.filter(function(r){return r[e.field]==e.name})}),l.forEach(function(r,n){var t=r.aggregate,l=r.field,s=r.render,p=i;(r.where||[]).forEach(function(e){p=p.filter(function(r){return r[e.field]==e.name})});var m="";if(p.length>0&&r.field){var d=null;t&&t!=f.FIRST||(d=p[0][l]),t&&(d=t==f.AVG?p.map(function(e){return e[l]}).reduce(function(e,r){return e+r})/p.length:t==f.SUM?p.map(function(e){return e[l]}).reduce(function(e,r){return e+r}):t==f.COUNT?p.length:t==f.MAX?Math.max.apply(null,p.map(function(e){return e[l]})):t==f.MIN?Math.min.apply(null,p.map(function(e){return e[l]})):t==f.LAST?p[p.length-1][l]:p[0][l]),m=s?s(d,p[0]):d}var y={key:""+(0,c.default)(8,16),className:r.className,style:r.style};n<o-1&&(e.rowSpan&&e.rowSpan[n]?y.rowSpan=e.rowSpan[n]:y=null),y&&u.push(a.default.createElement("td",y,m))}),t.push(a.default.createElement("tr",{key:r},u))}),a.default.createElement("tbody",null,t)}},{key:"render",value:function(){var e=this.props,r=e.style,n=e.className;return a.default.createElement("table",{style:r,className:"react-tablix "+(n||"")},this.renderHeader(),this.renderBody())}}]),r}();s.AGGREGATE_TYPE=f,s.propTypes={rowGroup:u.default.object.isRequired,columns:u.default.array.isRequired,data:u.default.array.isRequired,style:u.default.object,className:u.default.string},e.exports=s},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),n(9);var t,o=n(3),a=(t=o)&&t.__esModule?t:{default:t};r.default=a.default},,,,,function(e,r){}])});